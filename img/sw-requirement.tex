\documentclass{article}
\usepackage{tikz}
\usepackage{geometry}
\usepackage[dvipsnames]{xcolor}
\pagestyle{empty}
\usepackage{luatexja}
\usepackage{tikzpeople} 

\input {custom-color-def.tex}

\renewcommand{\kanjifamilydefault}{\gtdefault}
\renewcommand{\familydefault}{\sfdefault}
\newcommand{\docpaperwidth}{16cm}
\newcommand{\docpaperheight}{9cm}

\geometry{
  papersize={\docpaperwidth,\docpaperheight},
  margin=0cm,
  ignoreall=true
}

\usetikzlibrary{backgrounds}
\usetikzlibrary{calc}
\usetikzlibrary{shapes.callouts}
\usetikzlibrary{arrows.meta}
\usetikzlibrary{shapes.arrows}

\setlength{\parindent}{0cm}

\newcommand{\bgimg}{
  \path[fill=white!95!black, rounded corners=0.5cm]
    (0,0) rectangle
    (\docpaperwidth, \docpaperheight);
}

\begin{document}
  \begin{tikzpicture}
    \path [use as bounding box]
      (0,0) rectangle (\docpaperwidth, \docpaperheight);
    \newcommand{\atx}{\docpaperwidth / 3}
    \newcommand{\aty}{\docpaperheight / 3}
    \newcommand{\btx}{\docpaperwidth * 2 / 3}
    \newcommand{\bty}{\docpaperheight * 2 / 3}
    \newcommand{\ctx}{\docpaperwidth / 2}
    \newcommand{\cty}{\docpaperheight / 2}


    \node[shape=rectangle,draw] at (\ctx, \cty + 1cm) {
      \includegraphics[height=3cm,page=1]
        {img/sw-requirement-res-1.pdf}
    };

    \node[name=a,
      bob,
      minimum size=1cm,
      font=\tiny] at (\atx, \aty) {発注者};
    \node[name=b,
      alice,
      mirrored,
      minimum size=1cm,
      font=\tiny] at (\btx, \aty) {受注者};


    \node[callout absolute pointer={(a.mouth)},
      shape=ellipse callout,draw,
      font=\tiny] at
      (\atx + 12mm, \aty + 1mm) {お願いします};

    \node[callout absolute pointer={(b.mouth)},
      shape=ellipse callout,draw,
      font=\tiny] at
      (\btx - 11mm, \aty - 1mm) {承ります};
    \begin{scope}[on background layer]
      \bgimg
    \end{scope}
  \end{tikzpicture}
  \newpage
  \begin{tikzpicture}
    
    \path [use as bounding box]
      (0,0) rectangle (\docpaperwidth, \docpaperheight);
    \newcommand{\atx}{\docpaperwidth / 4}
    \newcommand{\aty}{\docpaperheight / 3}
    \newcommand{\btx}{\docpaperwidth * 3 / 4}
    \newcommand{\bty}{\docpaperheight * 2 / 3}
    \newcommand{\ctx}{\docpaperwidth / 2}
    \newcommand{\cty}{\docpaperheight / 2}


    \node[
      font=\tiny,
      align=center] at (\atx, \bty + 5mm) {
      \includegraphics[height=3cm,page=1]
        {img/sw-requirement-res-2.pdf}\\スマートフォン
      
    };
    \node[
      font=\tiny,
      align=center] at (\ctx, \bty + 5mm) {
      \includegraphics[height=3cm,page=1]
        {img/sw-requirement-res-4.pdf}\\処理
    };
    \node[
      font=\tiny,
      align=center] at (\btx, \bty + 5mm) {
      \includegraphics[height=3cm,page=1]
        {img/sw-requirement-res-3.pdf}\\サーバ
    };


    \node[name=b,
      alice,
      monitor,
      minimum size=1cm,
      font=\tiny] at (\ctx, \aty) {受注者};
    \begin{scope}[on background layer]
      \bgimg
    \end{scope}
  \end{tikzpicture}
  \newpage
  \begin{tikzpicture}
    \path [use as bounding box]
      (0,0) rectangle (\docpaperwidth, \docpaperheight);
    \newcommand{\atx}{\docpaperwidth / 3}
    \newcommand{\aty}{\docpaperheight / 3}
    \newcommand{\btx}{\docpaperwidth * 2 / 3}
    \newcommand{\bty}{\docpaperheight * 2 / 3}
    \newcommand{\ctx}{\docpaperwidth / 2}
    \newcommand{\cty}{\docpaperheight / 2}


    \node[
      font=\tiny,
      align=center,
      anchor=south,
      xshift=-2cm,
      yshift=-5mm] at (\ctx, \cty) {
      \includegraphics[page=1]
        {img/sw-requirement-res-3.pdf}
    };

    \node[align=center,
      xshift=-2cm,
      yshift=-2mm,
      anchor=north,
      font=\tiny] at (\ctx, \cty) {運用サーバ};

    \begin{scope}[xshift=5mm]
      \path [clip,draw, rounded corners=1mm]
        (\ctx, \cty) rectangle ++(30mm, 32mm);
      \node [anchor=south west] at (\ctx, \cty) {
        \includegraphics[height=3cm,page=1]
          {img/sw-requirement-res-6.pdf}
      };
    \end{scope}

    \path [{Circle[]}-,draw=white]
      (\ctx - 2cm, \cty - 5mm + 3.95cm / 2) --
      (\ctx - 2cm + 0.8cm, \cty - 5mm + 3.95cm / 2 + 0.8cm) --
      (\ctx - 2cm + 2.2cm / 2, \cty - 5mm + 3.95cm / 2 + 0.8cm);

    \path [draw] 
      (\ctx - 2cm + 2.2cm / 2, \cty - 5mm + 3.95cm / 2 + 0.8cm)
      -- (\ctx + 5mm, \cty - 5mm + 3.95cm / 2 + 0.8cm);

    \node[name=a,
      bob,
      minimum size=1cm,
      font=\tiny] at (\atx, \aty) {発注者};
    \node[name=b,
      alice,
      mirrored,
      minimum size=1cm,
      font=\tiny] at (\btx, \aty) {受注者};

    \node[callout absolute pointer={(b.mouth)},
      shape=ellipse callout,draw,
      font=\tiny] at
      (\btx - 13mm, \aty + 1mm) {完了しました。};

    \node[callout absolute pointer={(a.mouth)},
      shape=ellipse callout,draw,
      font=\tiny] at
      (\atx + 12mm, \aty - 1mm) {受領します。};
    \begin{scope}[on background layer]
      \bgimg
    \end{scope}  \end{tikzpicture}
  \newpage
  \begin{tikzpicture}
    \path [use as bounding box]
      (0,0) rectangle (\docpaperwidth, \docpaperheight);
    \newcommand{\atx}{\docpaperwidth / 3}
    \newcommand{\aty}{\docpaperheight / 3}
    \newcommand{\btx}{\docpaperwidth * 2 / 3}
    \newcommand{\bty}{\docpaperheight * 2 / 3}
    \newcommand{\ctx}{\docpaperwidth / 2}
    \newcommand{\cty}{\docpaperheight / 2}


    \node[
      font=\tiny,
      align=center,
      anchor=south,
      xshift=1cm, 
      yshift=-5mm] at (\btx, \cty) {
      \includegraphics[page=1]
        {img/sw-requirement-res-3.pdf}
    };

    \node[
      font=\tiny,
      align=center,
      anchor=south,
      xshift=-1cm] at (\atx, \cty) {
      \includegraphics[page=1,height=2.5cm]
        {img/sw-requirement-res-5.pdf}
    };


    \node[align=center,
      font=\tiny] at (\ctx + 5mm,\bty) {データ};


    \begin{scope}[
      xshift=\ctx + 5mm,
      yshift=\bty]
      \path[draw,
        ->]
        (-5mm, 2.5mm) -- (5mm, 2.5mm); 
      \path[draw,
        ->]
        (5mm, -2.5mm) -- (-5mm, -2.5mm);
    \end{scope}
 
    \node[align=center,
      yshift=-2mm,
      xshift=1cm,
      anchor=north,
      font=\tiny] at (\btx, \cty) {運用サーバ};

    \node[align=center,
      yshift=-2mm,
      xshift=-1cm,
      anchor=north,
      font=\tiny] at (\atx, \cty) {アプリユーザ};


    \node[name=a,
      bob,
      monitor,
      minimum size=1cm,
      font=\tiny] at (\ctx, \aty) {発注者};
    \begin{scope}[on background layer]
      \bgimg
    \end{scope}
  \end{tikzpicture}

  \newpage
  \begin{tikzpicture}
    \path [use as bounding box]
      (0,0) rectangle (\docpaperwidth, \docpaperheight);

    \newcommand{\atx}{\docpaperwidth / 3}
    \newcommand{\aty}{\docpaperheight / 3}
    \newcommand{\btx}{\docpaperwidth * 2 / 3}
    \newcommand{\bty}{\docpaperheight * 2 / 3}
    \newcommand{\ctx}{\docpaperwidth / 2}
    \newcommand{\cty}{\docpaperheight / 2}

    \node[shape=rectangle,draw] at (\ctx, \cty + 1cm) {
      \includegraphics[height=2cm,page=1]
        {img/sw-requirement-res-7.pdf}
    };

    \node[name=a,
      bob,
      minimum size=1cm,
      font=\tiny] at (\atx, \aty) {発注者};
    \node[name=b,
      alice,
      mirrored,
      minimum size=1cm,
      font=\tiny] at (\btx, \aty) {受注者};


    \node[callout absolute pointer={(a.mouth)},
      shape=ellipse callout,draw,
      font=\tiny] at
      (\atx + 12mm, \aty + 1mm) {お願いします};

    \node[callout absolute pointer={(b.mouth)},
      shape=ellipse callout,draw,
      font=\tiny] at
      (\btx - 11mm, \aty - 1mm) {検討します};
    \begin{scope}[on background layer]
      \bgimg
    \end{scope} 
  \end{tikzpicture}
  \newpage
  \begin{tikzpicture}
    \path [use as bounding box]
      (0,0) rectangle (\docpaperwidth, \docpaperheight);

    \newcommand{\atx}{\docpaperwidth / 3}
    \newcommand{\aty}{\docpaperheight / 3}
    \newcommand{\btx}{\docpaperwidth * 2 / 3}
    \newcommand{\bty}{\docpaperheight * 2 / 3}
    \newcommand{\ctx}{\docpaperwidth / 2}
    \newcommand{\cty}{\docpaperheight / 2}

    \node[yshift=0mm,
      anchor=south] at (\atx, \cty) {
      \includegraphics[page=1]
        {img/sw-requirement-res-3.pdf}
    };

    \node[align=center,
      anchor=north,
      font=\tiny] at (\atx, \cty) {現行サーバ};

    \node[
      yshift=0mm,
      anchor=south] at (\btx, \cty) {
      \includegraphics[page=1]
        {img/sw-requirement-res-8.pdf}
    };

    \node[align=center,
      anchor=north,
      font=\tiny] at (\btx, \cty) {置き換えサーバ};


    \node[font=\tiny,
      yshift=2cm,
      single arrow,
      draw] at (\ctx, \cty) {置き換え};
    

    \node[name=a,
      bob,
      minimum size=1cm,
      font=\tiny] at (\atx, \aty) {発注者};
    \node[name=b,
      alice,
      mirrored,
      minimum size=1cm,
      font=\tiny] at (\btx, \aty) {受注者};


    \node[callout absolute pointer={(a.mouth)},
      shape=ellipse callout,draw,
      font=\tiny] at
      (\atx + 12mm, \aty - 1mm) {採用します};

    \node[callout absolute pointer={(b.mouth)},
      shape=ellipse callout,draw,
      font=\tiny] at
      (\btx - 11mm, \aty + 1mm) {提案します};
    \begin{scope}[on background layer]
      \bgimg
    \end{scope} 
  \end{tikzpicture}
\end{document}

% vi: se ts=2 sw=2 et:
